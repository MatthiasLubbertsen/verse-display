<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verse Display</title>
    <style>
        html {
            border: solid 1px #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            height: 118px;
        }

        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #1d1d1d;
        }

        .verse {
            font-size: 1em;
            margin-bottom: 10px;
            color: white;
        }

        .chapter {
            font-size: 0.8em;
            color: gray;
            text-decoration: none;
        }
    </style>
</head>
<body>
    <div class="verse"></div>
    <a href="" target="_blank" class="chapter"></a>
</body>
<script>
    const today = new Date().toDateString();
    const cachedData = localStorage.getItem('verseData');
    const cachedDate = localStorage.getItem('verseDate');

    if (cachedData && cachedDate === today) {
        const data = JSON.parse(cachedData);
        updateUI(data);
    } else {
        fetch('/api/verse_of_the_day')
            .then(response => response.json())
            .then(data => {
                localStorage.setItem('verseData', JSON.stringify(data));
                localStorage.setItem('verseDate', today);
                updateUI(data);
            })
            .catch(error => console.error('Error fetching verse:', error));
    }

    function updateUI(data) {
        document.querySelector('.verse').innerText = data.verse;
        document.querySelector('.chapter').innerText = data.chapter;
        document.querySelector('.chapter').href = data.verseUrl;
    }
</script>

</html>
